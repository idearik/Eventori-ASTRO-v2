---
import EventCard from '../components/EventCard.astro';
import events from '../data/events.json';

const now = new Date();
const upcomingEvents = events.filter(event => new Date(event.date) >= now);
const pastEvents = events.filter(event => new Date(event.date) < now);
---

<html>
<head>
  <title>Eventori</title>
  <link rel="stylesheet" href="/styles/global.css">
</head>
<body>
  <h1>Eventori</h1>
  
  <div class="button-container">
    <button id="upcoming-btn">Upcoming Events</button>
    <button id="past-btn">Past Events</button>
  </div>
  
  <div id="events-container">
    <div id="upcoming-events" class="event-list">
      {upcomingEvents.map(event => (
        <EventCard
          name={event.name}
          date={event.date}
          endDate={event.endDate}
          location={event.location}
          status={event.status}
          description={event.description}
          url={event.url}
          isPast={false}
        />
      ))}
    </div>
    
    <div id="past-events" class="event-list" style="display: none;">
      {pastEvents.map(event => (
        <EventCard
          name={event.name}
          date={event.date}
          endDate={event.endDate}
          location={event.location}
          status={event.status}
          description={event.description}
          url={event.url}
          isPast={true}
        />
      ))}
    </div>
  </div>
  
  <script>
    const upcomingBtn = document.getElementById('upcoming-btn');
    const pastBtn = document.getElementById('past-btn');
    const upcomingEvents = document.getElementById('upcoming-events');
    const pastEvents = document.getElementById('past-events');

    if (upcomingBtn && pastBtn && upcomingEvents && pastEvents) {
      upcomingBtn.addEventListener('click', () => {
        upcomingEvents.style.display = 'block';
        pastEvents.style.display = 'none';
      });

      pastBtn.addEventListener('click', () => {
        upcomingEvents.style.display = 'none';
        pastEvents.style.display = 'block';
      });
    }
  </script>
</body>
</html>
